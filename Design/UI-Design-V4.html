<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cine Mitr Dashboard v5.0</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
        }

        .main-header {
            background: white;
            border-bottom: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-tabs {
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tabs .nav-link {
            border: none;
            color: #6c757d;
            padding: 1rem 1.5rem;
        }

        .nav-tabs .nav-link.active {
            background-color: #007bff;
            color: white;
            border-radius: 0.375rem 0.375rem 0 0;
        }

        .content-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .content-header {
            background: #f8f9fa;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #dee2e6;
            border-radius: 0.5rem 0.5rem 0 0;
        }

        .search-container {
            background: #f8f9fa;
            padding: 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }

        .search-input {
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
        }

        .search-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .filter-select {
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
        }

        .table-container {
            padding: 1.5rem;
        }

        .table {
            margin-bottom: 0;
        }

        .table th {
            background-color: #f8f9fa;
            border-top: none;
            font-weight: 600;
            color: #495057;
        }

        .table td {
            vertical-align: middle;
        }

        .badge {
            font-size: 0.75rem;
            padding: 0.375rem 0.75rem;
        }

        .btn {
            border-radius: 0.375rem;
            font-weight: 500;
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }

        .search-highlight {
            background-color: #fff3cd;
            padding: 0.1rem 0.2rem;
            border-radius: 0.25rem;
            font-weight: 600;
        }

        .no-results {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }

        .search-stats {
            font-size: 0.875rem;
            color: #6c757d;
        }

        .table-row-hidden {
            display: none !important;
        }

        .modal-content {
            border-radius: 0.5rem;
        }

        .modal-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .form-control {
            border-radius: 0.375rem;
        }

        .form-control:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="main-header">
        <div class="container-fluid">
            <div class="py-3">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-chart-line me-2 text-primary fs-4"></i>
                        <div>
                            <h4 class="mb-0">Cine Mitr Dashboard</h4>
                            <small class="text-muted">Version 5.0 - Search Enabled</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                        <span class="text-muted">Welcome, Admin</span>
                        <a href="/h2-console" target="_blank" class="btn btn-primary">
                            <i class="fas fa-database me-1"></i>H2 Console
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid py-4">
        <!-- Navigation -->
        <ul class="nav nav-tabs mb-4" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard"
                    type="button" role="tab">
                    <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="media-tab" data-bs-toggle="tab" data-bs-target="#media" type="button"
                    role="tab">
                    <i class="fas fa-film me-1"></i>Media
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="content-tab" data-bs-toggle="tab" data-bs-target="#content" type="button"
                    role="tab">
                    <i class="fas fa-folder-open me-1"></i>Content
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload" type="button"
                    role="tab">
                    <i class="fas fa-cloud-upload-alt me-1"></i>Upload
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="states-tab" data-bs-toggle="tab" data-bs-target="#states" type="button"
                    role="tab">
                    <i class="fas fa-chart-bar me-1"></i>Analytics
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabContent">
            <!-- Dashboard Tab -->
            <div class="tab-pane fade show active" id="dashboard" role="tabpanel">
                <div class="row g-4 mb-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="fas fa-film text-primary fs-1 mb-3"></i>
                                <h3 class="mb-1" th:text="${mediaCount ?: '156'}">156</h3>
                                <p class="text-muted mb-0">Total Media</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="fas fa-folder-open text-success fs-1 mb-3"></i>
                                <h3 class="mb-1" th:text="${contentCount ?: '89'}">89</h3>
                                <p class="text-muted mb-0">Content Items</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="fas fa-cloud-upload-alt text-warning fs-1 mb-3"></i>
                                <h3 class="mb-1" th:text="${uploadCount ?: '234'}">234</h3>
                                <p class="text-muted mb-0">Uploads</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="fas fa-chart-line text-info fs-1 mb-3"></i>
                                <h3 class="mb-1" th:text="${statesCount ?: '67'}">67</h3>
                                <p class="text-muted mb-0">Analytics Records</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="content-header">
                        <h5 class="mb-0">
                            <i class="fas fa-clock me-2"></i>Recent Activity
                        </h5>
                    </div>
                    <div class="table-container">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="mb-3">Latest Media</h6>
                                <div class="list-group">
                                    <div th:each="media, iterStat : ${mediaList}" th:if="${iterStat.index < 3}"
                                        class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1" th:text="${media.mediaName}">Movie Title</h6>
                                            <small class="text-muted" th:text="${media.mediaType}">Movie</small>
                                        </div>
                                        <span th:if="${media.isDownloaded}" class="badge bg-success">Downloaded</span>
                                        <span th:unless="${media.isDownloaded}" class="badge bg-warning">Pending</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="mb-3">System Status</h6>
                                <div class="row g-3">
                                    <div class="col-6">
                                        <div class="card text-center">
                                            <div class="card-body py-3">
                                                <h5 class="text-primary mb-1">98.5%</h5>
                                                <small class="text-muted">Uptime</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="card text-center">
                                            <div class="card-body py-3">
                                                <h5 class="text-success mb-1">1.2M</h5>
                                                <small class="text-muted">Total Views</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Media Tab -->
            <div class="tab-pane fade" id="media" role="tabpanel">
                <div class="content-card">
                    <div class="content-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-film me-2"></i>Media Management
                            </h5>
                            <div>
                                <button class="btn btn-success me-2" data-bs-toggle="modal"
                                    data-bs-target="#bulkUploadModal" onclick="setBulkUploadType('media')">
                                    <i class="fas fa-upload me-1"></i>Bulk Upload
                                </button>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mediaModal">
                                    <i class="fas fa-plus me-1"></i>Add Media
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search Interface -->
                    <div class="search-container">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <input type="text" class="form-control search-input" id="mediaSearch"
                                    placeholder="Search media..." onkeyup="filterTable('media')">
                            </div>
                            <div class="col-md-2">
                                <select class="form-select filter-select" id="mediaTypeFilter"
                                    onchange="filterTable('media')">
                                    <option value="">All Types</option>
                                    <option value="Movie">Movie</option>
                                    <option value="Web-Series">Web-Series</option>
                                    <option value="Documentary">Documentary</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select filter-select" id="mediaLanguageFilter"
                                    onchange="filterTable('media')">
                                    <option value="">All Languages</option>
                                    <option value="English">English</option>
                                    <option value="Spanish">Spanish</option>
                                    <option value="French">French</option>
                                    <option value="Hindi">Hindi</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="clearFilters('media')">
                                    Clear Filters
                                </button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="search-stats" id="mediaSearchResults">Showing all results</small>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="mediaTable">
                                <thead>
                                    <tr>
                                        <th>Media Name</th>
                                        <th>Type</th>
                                        <th>Language</th>
                                        <th>Genre</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="media : ${mediaList}">
                                        <td th:text="${media.mediaName}">The Dark Knight</td>
                                        <td th:text="${media.mediaType}">Movie</td>
                                        <td th:text="${media.language}">English</td>
                                        <td th:text="${media.mainGenres}">Action</td>
                                        <td>
                                            <span th:if="${media.isDownloaded}"
                                                class="badge bg-success">Downloaded</span>
                                            <span th:unless="${media.isDownloaded}"
                                                class="badge bg-warning">Pending</span>
                                        </td>
                                        <td>
                                            <button class="btn btn-primary btn-sm me-1"
                                                th:onclick="'editMedia(' + ${media.id} + ')'">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm"
                                                th:onclick="'deleteMedia(' + ${media.id} + ')'">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Tab -->
            <div class="tab-pane fade" id="content" role="tabpanel">
                <div class="content-card">
                    <div class="content-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-folder-open me-2"></i>Content Management
                            </h5>
                            <div>
                                <button class="btn btn-success me-2" data-bs-toggle="modal"
                                    data-bs-target="#bulkUploadModal" onclick="setBulkUploadType('content')">
                                    <i class="fas fa-upload me-1"></i>Bulk Upload
                                </button>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#contentModal">
                                    <i class="fas fa-plus me-1"></i>Add Content
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search Interface -->
                    <div class="search-container">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <input type="text" class="form-control search-input" id="contentSearch"
                                    placeholder="Search content..." onkeyup="filterTable('content')">
                            </div>
                            <div class="col-md-2">
                                <select class="form-select filter-select" id="contentTypeFilter"
                                    onchange="filterTable('content')">
                                    <option value="">All Types</option>
                                    <option value="Movie">Movie</option>
                                    <option value="Web-Series">Web-Series</option>
                                    <option value="Documentary">Documentary</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select filter-select" id="contentStatusFilter"
                                    onchange="filterTable('content')">
                                    <option value="">All Status</option>
                                    <option value="pending">Pending</option>
                                    <option value="downloading">Downloading</option>
                                    <option value="downloaded">Downloaded</option>
                                    <option value="error">Error</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select filter-select" id="contentPriorityFilter"
                                    onchange="filterTable('content')">
                                    <option value="">All Priority</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="clearFilters('content')">
                                    Clear Filters
                                </button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="search-stats" id="contentSearchResults">Showing all results</small>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="contentTable">
                                <thead>
                                    <tr>
                                        <th>Link</th>
                                        <th>Type</th>
                                        <th>Status</th>
                                        <th>Priority</th>
                                        <th>Local Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="content : ${contentList}">
                                        <td th:text="${#strings.abbreviate(content.link, 40)}">https://example.com/...
                                        </td>
                                        <td th:text="${content.mediaType}">Movie</td>
                                        <td>
                                            <span th:class="'badge ' + (${content.status} == 'downloaded' ? 'bg-success' : 
                                                           ${content.status} == 'error' ? 'bg-danger' : 'bg-warning')"
                                                th:text="${content.status}">Downloaded</span>
                                        </td>
                                        <td>
                                            <span
                                                th:class="'badge ' + (${content.priority} == 'high' ? 'bg-danger' : 
                                                           ${content.priority} == 'medium' ? 'bg-warning' : 'bg-secondary')"
                                                th:text="${content.priority}">High</span>
                                        </td>
                                        <td>
                                            <span
                                                th:class="'badge ' + (${content.localStatus} == 'downloaded' ? 'bg-success' : 
                                                           ${content.localStatus} == 'error' ? 'bg-danger' : 'bg-secondary')"
                                                th:text="${content.localStatus}">Downloaded</span>
                                        </td>
                                        <td>
                                            <button class="btn btn-primary btn-sm me-1"
                                                th:onclick="'editContent(' + ${content.id} + ')'">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm"
                                                th:onclick="'deleteContent(' + ${content.id} + ')'">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upload Tab -->
            <div class="tab-pane fade" id="upload" role="tabpanel">
                <div class="content-card">
                    <div class="content-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-cloud-upload-alt me-2"></i>Upload Management
                            </h5>
                            <div>
                                <button class="btn btn-success me-2" data-bs-toggle="modal"
                                    data-bs-target="#bulkUploadModal" onclick="setBulkUploadType('upload')">
                                    <i class="fas fa-upload me-1"></i>Bulk Upload
                                </button>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                    <i class="fas fa-plus me-1"></i>Add Upload
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search Interface -->
                    <div class="search-container">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <input type="text" class="form-control search-input" id="uploadSearch"
                                    placeholder="Search uploads..." onkeyup="filterTable('upload')">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select filter-select" id="uploadStatusFilter"
                                    onchange="filterTable('upload')">
                                    <option value="">All Status</option>
                                    <option value="pending">Pending</option>
                                    <option value="uploading">Uploading</option>
                                    <option value="uploaded">Uploaded</option>
                                    <option value="completed">Completed</option>
                                    <option value="blocked">Blocked</option>
                                    <option value="error">Error</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-outline-secondary w-100" onclick="clearFilters('upload')">
                                    Clear Filters
                                </button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="search-stats" id="uploadSearchResults">Showing all results</small>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="uploadTable">
                                <thead>
                                    <tr>
                                        <th>Source Link</th>
                                        <th>Source Data</th>
                                        <th>Status</th>
                                        <th>Media Data</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="upload : ${uploadList}">
                                        <td th:text="${#strings.abbreviate(upload.sourceLink, 40)}">
                                            https://source.com/...</td>
                                        <td th:text="${#strings.abbreviate(upload.sourceData, 50)}">Movie metadata...
                                        </td>
                                        <td>
                                            <span th:class="'badge ' + (${upload.status} == 'completed' ? 'bg-success' : 
                                                           ${upload.status} == 'uploaded' ? 'bg-primary' : 
                                                           ${upload.status} == 'blocked' ? 'bg-danger' : 'bg-warning')"
                                                th:text="${upload.status}">Completed</span>
                                        </td>
                                        <td th:text="${#strings.abbreviate(upload.mediaData, 40)}">HD Video, 2.5GB</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm me-1"
                                                th:onclick="'editUpload(' + ${upload.id} + ')'">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm"
                                                th:onclick="'deleteUpload(' + ${upload.id} + ')'">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- States Tab -->
            <div class="tab-pane fade" id="states" role="tabpanel">
                <div class="content-card">
                    <div class="content-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-chart-bar me-2"></i>Analytics & States
                            </h5>
                            <div>
                                <button class="btn btn-success me-2" data-bs-toggle="modal"
                                    data-bs-target="#bulkUploadModal" onclick="setBulkUploadType('states')">
                                    <i class="fas fa-upload me-1"></i>Bulk Upload
                                </button>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#statesModal">
                                    <i class="fas fa-plus me-1"></i>Add Record
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search Interface -->
                    <div class="search-container">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <input type="text" class="form-control search-input" id="statesSearch"
                                    placeholder="Search analytics..." onkeyup="filterTable('states')">
                            </div>
                            <div class="col-md-2">
                                <input type="date" class="form-control filter-select" id="statesDateFilter"
                                    onchange="filterTable('states')">
                            </div>
                            <div class="col-md-2">
                                <input type="number" class="form-control filter-select" id="statesViewsFilter"
                                    onchange="filterTable('states')" placeholder="Min views">
                            </div>
                            <div class="col-md-2">
                                <input type="text" class="form-control filter-select" id="statesPageFilter"
                                    onchange="filterTable('states')" placeholder="Page name">
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="clearFilters('states')">
                                    Clear Filters
                                </button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="search-stats" id="statesSearchResults">Showing all results</small>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover" id="statesTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Total Views</th>
                                        <th>Subscribers</th>
                                        <th>Interactions</th>
                                        <th>Page</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="state : ${statesList}">
                                        <td th:text="${#temporals.format(state.date, 'yyyy-MM-dd')}">2024-01-15</td>
                                        <td th:text="${#numbers.formatInteger(state.totalViews, 0, 'COMMA')}">15,420
                                        </td>
                                        <td th:text="${#numbers.formatInteger(state.subscribers, 0, 'COMMA')}">1,250
                                        </td>
                                        <td th:text="${#numbers.formatInteger(state.interaction, 0, 'COMMA')}">850</td>
                                        <td th:text="${state.page}">cine.mitr</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm me-1"
                                                th:onclick="'editStates(' + ${state.id} + ')'">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm"
                                                th:onclick="'deleteStates(' + ${state.id} + ')'">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals (keeping existing modals but simplified) -->
    <!-- Media Modal -->
    <div class="modal fade" id="mediaModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-film me-2"></i><span id="mediaModalTitle">Add New Media</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="mediaForm">
                        <input type="hidden" id="mediaId" name="id">
                        <div class="mb-3">
                            <label class="form-label">Media Name</label>
                            <input type="text" class="form-control" id="mediaName" name="mediaName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Media Type</label>
                            <select class="form-select" id="mediaType" name="mediaType" required>
                                <option value="">Select Type</option>
                                <option value="Movie">Movie</option>
                                <option value="Web-Series">Web-Series</option>
                                <option value="Documentary">Documentary</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Language</label>
                            <select class="form-select" id="language" name="language" required>
                                <option value="">Select Language</option>
                                <option value="English">English</option>
                                <option value="Spanish">Spanish</option>
                                <option value="French">French</option>
                                <option value="Hindi">Hindi</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Main Genres</label>
                            <select class="form-select" id="mainGenres" name="mainGenres" required>
                                <option value="">Select Genre</option>
                                <option value="Action">Action</option>
                                <option value="Comedy">Comedy</option>
                                <option value="Drama">Drama</option>
                                <option value="Horror">Horror</option>
                                <option value="Romance">Romance</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Sub Genres</label>
                            <input type="text" class="form-control" id="subGenres" name="subGenres">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Download Path</label>
                            <input type="text" class="form-control" id="downloadPath" name="downloadPath">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Available On</label>
                            <input type="text" class="form-control" id="availableOn" name="availableOn">
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="isDownloaded" value="true"
                                    id="isDownloaded">
                                <label class="form-check-label" for="isDownloaded">Is Downloaded</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitMediaForm()">Save Media</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Modal -->
    <div class="modal fade" id="contentModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-folder-open me-2"></i><span id="contentModalTitle">Add New Content</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="contentForm">
                        <input type="hidden" id="contentId" name="id">
                        <div class="mb-3">
                            <label class="form-label">Link</label>
                            <input type="url" class="form-control" id="contentLink" name="link" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Media Type</label>
                            <select class="form-select" id="contentMediaType" name="mediaType" required>
                                <option value="">Select Type</option>
                                <option value="Movie">Movie</option>
                                <option value="Web-Series">Web-Series</option>
                                <option value="Documentary">Documentary</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Media Name</label>
                            <input type="text" class="form-control" id="contentMediaName" name="mediaName">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="contentStatus" name="status" required>
                                <option value="">Select Status</option>
                                <option value="pending">Pending</option>
                                <option value="downloading">Downloading</option>
                                <option value="downloaded">Downloaded</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Priority</label>
                            <select class="form-select" id="contentPriority" name="priority" required>
                                <option value="">Select Priority</option>
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Local Status</label>
                            <select class="form-select" id="contentLocalStatus" name="localStatus">
                                <option value="">Select Local Status</option>
                                <option value="pending">Pending</option>
                                <option value="downloaded">Downloaded</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Local File Path</label>
                            <input type="text" class="form-control" id="contentLocalFilePath" name="localFilePath">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitContentForm()">Save Content</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="modal fade" id="uploadModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-cloud-upload-alt me-2"></i><span id="uploadModalTitle">Add New Upload</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="uploadForm">
                        <input type="hidden" id="uploadId" name="id">
                        <div class="mb-3">
                            <label class="form-label">Source Link</label>
                            <input type="url" class="form-control" id="uploadSourceLink" name="sourceLink" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Source Data</label>
                            <textarea class="form-control" id="uploadSourceData" name="sourceData" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="uploadStatus" name="status" required>
                                <option value="">Select Status</option>
                                <option value="pending">Pending</option>
                                <option value="uploading">Uploading</option>
                                <option value="uploaded">Uploaded</option>
                                <option value="completed">Completed</option>
                                <option value="blocked">Blocked</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Media Data</label>
                            <textarea class="form-control" id="uploadMediaData" name="mediaData" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitUploadForm()">Save Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- States Modal -->
    <div class="modal fade" id="statesModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-chart-bar me-2"></i><span id="statesModalTitle">Add New Analytics Record</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="statesForm">
                        <input type="hidden" id="statesId" name="id">
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="statesDate" name="date" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Total Views</label>
                            <input type="number" class="form-control" id="statesTotalViews" name="totalViews" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Subscribers</label>
                            <input type="number" class="form-control" id="statesSubscribers" name="subscribers"
                                required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Interactions</label>
                            <input type="number" class="form-control" id="statesInteraction" name="interaction"
                                required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Content</label>
                            <input type="text" class="form-control" id="statesContent" name="content">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Page</label>
                            <input type="text" class="form-control" id="statesPage" name="page" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitStatesForm()">Save Record</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Upload Modal -->
    <div class="modal fade" id="bulkUploadModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-upload me-2"></i>Bulk Upload Data
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <div class="border border-2 border-dashed rounded p-4 text-center">
                            <div class="mb-3">
                                <i class="fas fa-cloud-upload-alt fs-1 text-muted"></i>
                            </div>
                            <div class="mb-3">
                                <label for="bulkFile" class="btn btn-primary">
                                    <i class="fas fa-file-upload me-1"></i>Choose File
                                </label>
                                <input type="file" id="bulkFile" class="d-none" accept=".csv,.xlsx,.xls">
                            </div>
                            <p class="text-muted mb-0">CSV, Excel files up to 10MB</p>
                        </div>
                    </div>

                    <div id="fileInfo" class="alert alert-success d-none">
                        <strong>Selected File:</strong> <span id="fileName"></span>
                    </div>

                    <div id="uploadProgress" class="mb-3 d-none">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h6>Expected CSV Format:</h6>
                            <button type="button" class="btn btn-warning btn-sm" onclick="downloadTemplate()">
                                <i class="fas fa-download me-1"></i>Download Template
                            </button>
                        </div>
                        <div class="p-3 bg-light rounded">
                            <small class="text-muted font-monospace" id="csvFormat">
                                Format will be shown based on selected tab
                            </small>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="processBulkBtn" onclick="processBulkUpload()"
                        disabled>
                        <i class="fas fa-cog me-1"></i>Process Upload
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Simple Dashboard JavaScript for Version 5.0 with Search
        class Dashboard {
            constructor() {
                this.currentBulkType = '';
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateCsvFormat();
            }

            bindEvents() {
                document.getElementById('bulkFile').addEventListener('change', (e) => {
                    this.handleFileSelect(e);
                });
            }

            handleFileSelect(event) {
                const file = event.target.files[0];
                const fileInfo = document.getElementById('fileInfo');
                const fileName = document.getElementById('fileName');
                const processBtn = document.getElementById('processBulkBtn');

                if (file) {
                    fileName.textContent = `${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
                    fileInfo.classList.remove('d-none');
                    processBtn.disabled = false;
                } else {
                    fileInfo.classList.add('d-none');
                    processBtn.disabled = true;
                }
            }

            updateCsvFormat() {
                const csvFormat = document.getElementById('csvFormat');
                const formats = {
                    media: 'media_name,media_type,language,main_genres,sub_genres,is_downloaded,download_path,available_on',
                    content: 'link,media_type,media_name,status,priority,local_status,local_file_path',
                    upload: 'source_link,source_data,status,media_data',
                    states: 'date,total_views,subscribers,interaction,content,page'
                };

                if (this.currentBulkType && formats[this.currentBulkType]) {
                    csvFormat.textContent = formats[this.currentBulkType];
                }
            }

            // Search and Filter Functions
            filterTable(tableType) {
                const searchInput = document.getElementById(`${tableType}Search`);
                const table = document.getElementById(`${tableType}Table`);
                const tbody = table.querySelector('tbody');
                const rows = tbody.querySelectorAll('tr');
                const resultsElement = document.getElementById(`${tableType}SearchResults`);

                const filters = this.getFilterValues(tableType);
                let visibleCount = 0;

                rows.forEach(row => {
                    if (row.classList.contains('no-results-row')) return;

                    const cells = row.querySelectorAll('td');
                    let shouldShow = true;

                    // Apply search text filter
                    if (filters.search && filters.search.trim() !== '') {
                        const searchText = filters.search.toLowerCase();
                        const rowText = Array.from(cells).map(cell =>
                            cell.textContent.toLowerCase()
                        ).join(' ');

                        if (!rowText.includes(searchText)) {
                            shouldShow = false;
                        } else {
                            this.highlightSearchTerms(cells, searchText);
                        }
                    } else {
                        this.removeHighlights(cells);
                    }

                    // Apply specific filters
                    if (shouldShow) {
                        shouldShow = this.applySpecificFilters(tableType, cells, filters);
                    }

                    // Show/hide row
                    if (shouldShow) {
                        row.classList.remove('table-row-hidden');
                        visibleCount++;
                    } else {
                        row.classList.add('table-row-hidden');
                    }
                });

                // Update results count
                const totalRows = rows.length;
                resultsElement.textContent = `Showing ${visibleCount} of ${totalRows} results`;

                // Handle no results
                this.handleNoResults(tbody, visibleCount, tableType);
            }

            getFilterValues(tableType) {
                const filters = { search: '' };

                const searchInput = document.getElementById(`${tableType}Search`);
                if (searchInput) {
                    filters.search = searchInput.value;
                }

                switch (tableType) {
                    case 'media':
                        filters.type = document.getElementById('mediaTypeFilter')?.value || '';
                        filters.language = document.getElementById('mediaLanguageFilter')?.value || '';
                        break;
                    case 'content':
                        filters.type = document.getElementById('contentTypeFilter')?.value || '';
                        filters.status = document.getElementById('contentStatusFilter')?.value || '';
                        filters.priority = document.getElementById('contentPriorityFilter')?.value || '';
                        break;
                    case 'upload':
                        filters.status = document.getElementById('uploadStatusFilter')?.value || '';
                        break;
                    case 'states':
                        filters.date = document.getElementById('statesDateFilter')?.value || '';
                        filters.minViews = document.getElementById('statesViewsFilter')?.value || '';
                        filters.page = document.getElementById('statesPageFilter')?.value || '';
                        break;
                }

                return filters;
            }

            applySpecificFilters(tableType, cells, filters) {
                switch (tableType) {
                    case 'media':
                        if (filters.type && !cells[1].textContent.includes(filters.type)) return false;
                        if (filters.language && !cells[2].textContent.includes(filters.language)) return false;
                        break;
                    case 'content':
                        if (filters.type && !cells[1].textContent.includes(filters.type)) return false;
                        if (filters.status && !cells[2].textContent.toLowerCase().includes(filters.status)) return false;
                        if (filters.priority && !cells[3].textContent.toLowerCase().includes(filters.priority)) return false;
                        break;
                    case 'upload':
                        if (filters.status && !cells[2].textContent.toLowerCase().includes(filters.status)) return false;
                        break;
                    case 'states':
                        if (filters.date && !cells[0].textContent.includes(filters.date)) return false;
                        if (filters.minViews) {
                            const views = parseInt(cells[1].textContent.replace(/,/g, ''));
                            if (views < parseInt(filters.minViews)) return false;
                        }
                        if (filters.page && !cells[4].textContent.toLowerCase().includes(filters.page.toLowerCase())) return false;
                        break;
                }
                return true;
            }

            highlightSearchTerms(cells, searchText) {
                cells.forEach(cell => {
                    if (cell.querySelector('.btn')) return; // Skip action buttons

                    const originalText = cell.textContent;
                    const regex = new RegExp(`(${searchText})`, 'gi');
                    const highlightedText = originalText.replace(regex, '<span class="search-highlight">$1</span>');

                    if (highlightedText !== originalText) {
                        cell.innerHTML = highlightedText;
                    }
                });
            }

            removeHighlights(cells) {
                cells.forEach(cell => {
                    const highlights = cell.querySelectorAll('.search-highlight');
                    highlights.forEach(highlight => {
                        highlight.outerHTML = highlight.textContent;
                    });
                });
            }

            handleNoResults(tbody, visibleCount, tableType) {
                let noResultsRow = tbody.querySelector('.no-results-row');

                if (visibleCount === 0) {
                    if (!noResultsRow) {
                        noResultsRow = document.createElement('tr');
                        noResultsRow.className = 'no-results-row';
                        noResultsRow.innerHTML = `
                            <td colspan="100%" class="no-results">
                                <i class="fas fa-search-minus fs-2 text-muted mb-2"></i>
                                <h6>No results found</h6>
                                <p class="text-muted">Try adjusting your search terms or filters</p>
                                <button class="btn btn-primary btn-sm" onclick="clearFilters('${tableType}')">
                                    Clear All Filters
                                </button>
                            </td>
                        `;
                        tbody.appendChild(noResultsRow);
                    }
                    noResultsRow.style.display = '';
                } else if (noResultsRow) {
                    noResultsRow.style.display = 'none';
                }
            }

            clearFilters(tableType) {
                // Clear search input
                const searchInput = document.getElementById(`${tableType}Search`);
                if (searchInput) searchInput.value = '';

                // Clear specific filters
                switch (tableType) {
                    case 'media':
                        document.getElementById('mediaTypeFilter').value = '';
                        document.getElementById('mediaLanguageFilter').value = '';
                        break;
                    case 'content':
                        document.getElementById('contentTypeFilter').value = '';
                        document.getElementById('contentStatusFilter').value = '';
                        document.getElementById('contentPriorityFilter').value = '';
                        break;
                    case 'upload':
                        document.getElementById('uploadStatusFilter').value = '';
                        break;
                    case 'states':
                        document.getElementById('statesDateFilter').value = '';
                        document.getElementById('statesViewsFilter').value = '';
                        document.getElementById('statesPageFilter').value = '';
                        break;
                }

                this.filterTable(tableType);
            }

            // Form submission methods
            async submitForm(formId, endpoint) {
                const form = document.getElementById(formId);
                const formData = new FormData(form);
                const id = formData.get('id');

                const data = {};
                for (let [key, value] of formData.entries()) {
                    if (key !== 'id') {
                        data[key] = value;
                    }
                }

                try {
                    const url = id ? `${endpoint}/${id}` : endpoint;
                    const method = id ? 'PUT' : 'POST';

                    const response = await fetch(url, {
                        method: method,
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        this.showAlert(`Record ${id ? 'updated' : 'saved'} successfully!`, 'success');
                        setTimeout(() => window.location.reload(), 1000);
                    } else {
                        this.showAlert('Error saving record', 'danger');
                    }
                } catch (error) {
                    this.showAlert('Network error', 'danger');
                }
            }

            async deleteRecord(endpoint, id) {
                if (!confirm('Are you sure you want to delete this record?')) {
                    return;
                }

                try {
                    const response = await fetch(`${endpoint}/${id}`, { method: 'DELETE' });

                    if (response.ok) {
                        this.showAlert('Record deleted successfully!', 'success');
                        setTimeout(() => window.location.reload(), 1000);
                    } else {
                        this.showAlert('Error deleting record', 'danger');
                    }
                } catch (error) {
                    this.showAlert('Network error', 'danger');
                }
            }

            showAlert(message, type) {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
                alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
                alertDiv.innerHTML = `
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;

                document.body.appendChild(alertDiv);
                setTimeout(() => alertDiv.remove(), 5000);
            }

            async processBulkUpload() {
                const fileInput = document.getElementById('bulkFile');
                const file = fileInput.files[0];

                if (!file) {
                    this.showAlert('Please select a file', 'warning');
                    return;
                }

                const formData = new FormData();
                formData.append('file', file);

                const progressDiv = document.getElementById('uploadProgress');
                const progressBar = progressDiv.querySelector('.progress-bar');
                const processBtn = document.getElementById('processBulkBtn');

                try {
                    progressDiv.classList.remove('d-none');
                    processBtn.disabled = true;
                    processBtn.textContent = 'Processing...';

                    // Simulate progress
                    let progress = 0;
                    const progressInterval = setInterval(() => {
                        progress += Math.random() * 20;
                        if (progress > 90) progress = 90;
                        progressBar.style.width = progress + '%';
                    }, 200);

                    const response = await fetch(`/api/${this.currentBulkType}/bulk-upload`, {
                        method: 'POST',
                        body: formData
                    });

                    clearInterval(progressInterval);
                    progressBar.style.width = '100%';

                    const result = await response.json();

                    if (result.success) {
                        this.showAlert(result.message, 'success');
                        setTimeout(() => window.location.reload(), 1000);
                    } else {
                        this.showAlert(result.message, 'danger');
                    }
                } catch (error) {
                    this.showAlert('Upload failed: ' + error.message, 'danger');
                } finally {
                    progressDiv.classList.add('d-none');
                    processBtn.disabled = false;
                    processBtn.innerHTML = '<i class="fas fa-cog me-1"></i>Process Upload';
                    progressBar.style.width = '0%';
                }
            }

            async downloadTemplate() {
                try {
                    const response = await fetch(`/api/${this.currentBulkType}/template`);
                    const blob = await response.blob();

                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${this.currentBulkType}_template.csv`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                } catch (error) {
                    this.showAlert('Error downloading template', 'danger');
                }
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            window.dashboard = new Dashboard();
        });

        // Global functions
        function setBulkUploadType(type) {
            window.dashboard.currentBulkType = type;
            window.dashboard.updateCsvFormat();
        }

        function filterTable(tableType) {
            window.dashboard.filterTable(tableType);
        }

        function clearFilters(tableType) {
            window.dashboard.clearFilters(tableType);
        }

        function submitMediaForm() {
            window.dashboard.submitForm('mediaForm', '/api/media');
        }

        function submitContentForm() {
            window.dashboard.submitForm('contentForm', '/api/content');
        }

        function submitUploadForm() {
            window.dashboard.submitForm('uploadForm', '/api/upload');
        }

        function submitStatesForm() {
            window.dashboard.submitForm('statesForm', '/api/states');
        }

        function processBulkUpload() {
            window.dashboard.processBulkUpload();
        }

        function downloadTemplate() {
            window.dashboard.downloadTemplate();
        }

        function deleteMedia(id) {
            window.dashboard.deleteRecord('/api/media', id);
        }

        function editMedia(id) {
            document.getElementById('mediaModalTitle').textContent = 'Edit Media';
            document.getElementById('mediaId').value = id;
            new bootstrap.Modal(document.getElementById('mediaModal')).show();
        }

        function deleteContent(id) {
            window.dashboard.deleteRecord('/api/content', id);
        }

        function editContent(id) {
            document.getElementById('contentModalTitle').textContent = 'Edit Content';
            document.getElementById('contentId').value = id;
            new bootstrap.Modal(document.getElementById('contentModal')).show();
        }

        function deleteUpload(id) {
            window.dashboard.deleteRecord('/api/upload', id);
        }

        function editUpload(id) {
            document.getElementById('uploadModalTitle').textContent = 'Edit Upload';
            document.getElementById('uploadId').value = id;
            new bootstrap.Modal(document.getElementById('uploadModal')).show();
        }

        function deleteStates(id) {
            window.dashboard.deleteRecord('/api/states', id);
        }

        function editStates(id) {
            document.getElementById('statesModalTitle').textContent = 'Edit Analytics Record';
            document.getElementById('statesId').value = id;
            new bootstrap.Modal(document.getElementById('statesModal')).show();
        }
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'978be288f40aa725',t:'MTc1NjgwNDMzOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>